<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
		<link rel="icon" href="../img/favicon.ico" type="image/x-icon" />
		<title>Java Web学习笔记</title>
		<script type="text/javascript" src="../jquery-1.11.1/jquery.min.js"></script>
		<script type="text/javascript" src="../js/bootstrap.min.js"></script>
		<script type="text/javascript" src="../js/net5ijy.js" ></script>
		<link href="../css/bootstrap.min.css" rel="stylesheet">
		<link href="../css/net5ijy.css" rel="stylesheet" >
	</head>
	<body>
		<nav class="navbar navbar-default navbar-fixed-top">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-target="#navbar-nav" data-toggle="collapse">
					<span class="sr-only"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a href="#" class="navbar-brand">
					<img src="../img/logo.png" width="50" height="50" class="logo" />
				</a>
			</div>
			<div id="navbar-nav" class="collapse navbar-collapse">
				<ul class="nav navbar-nav">
					<li class="active"><a href="../java/index.html">首页</a></li>
					<li class="dropdown">
						<a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown">
							编程
							<span class="caret"></span>
						</a>
						<ul class="dropdown-menu">
							<li><a href="../java/index.html">JAVA</a></li>
							<li><a href="../db/index.html">数据库</a></li>
						</ul>
					</li>
					<li><a href="../java/help.html">帮助</a></li>
				</ul>
			</div>
		</nav>
		
		<div class="container main-container">
			<h4 class="title">第六节&nbsp;&nbsp;&nbsp;&nbsp;JSP 概述</h4>
			<br />
			<ul class="list-unstyled">
				<li><a href="#f1">一、概述</a>
					<ul class="list-unstyled">
						<li><a href="#f1-1">1、	什么是 JSP</a></li>
						<li><a href="#f1-2">2、	工作原理</a></li>
						<li><a href="#f1-3">3、	生命周期</a></li>
					</ul>
				</li>
				<li><a href="#f2">二、语法</a>
					<ul class="list-unstyled">
						<li><a href="#f2-1">1、	基础语法</a></li>
						<li><a href="#f2-2">2、	指令</a></li>
						<li><a href="#f2-3">3、	page 指令</a></li>
						<li><a href="#f2-4">4、	include 指令</a></li>
					</ul>
				</li>
				<li><a href="#f3">三、JSP 内置对象</a>
					<ul class="list-unstyled">
						<li><a href="#f3-1">1、	什么是内置对象</a></li>
						<li><a href="#f3-2">2、	具体类型和方法</a></li>
					</ul>
				</li>
			</ul>
			<br />

			<h4 id="f1" class="title-1th">一、概述</h4>

			<h5 id="f1-1" class="title-2th">1、	什么是 JSP</h5>

			<p>
				1）	全称 <code>Java Server Page</code>
			</p>
			<p>
				2）	在生成动态的 <code>HTML</code> 文档时，直接使用 <code>Servlet</code> 比较麻烦，而且当需要修改文档内容时，需要修改 <code>Servlet</code> 代码重新编译。所以才有了 <code>JSP</code> 作为 <code>Servlet</code> 在视图层的补充，其实二者都可以完成所有的请求处理，但是实际开发中是二者结合使用，由 <code>servlet</code> 处理业务，由 <code>JSP</code> 显示页面
			</p>
			<p>
				3）	文本格式，可以嵌套 <code>HTML</code>、<code>Java</code> 代码，与 <code>Servlet</code> 相比，<code>JSP</code> 更像是 <code>HTML</code>，可读性好
			</p>
			<p>
				4）	由容器解析、编译和执行
			</p>
			<p>
				5）	本质上还是 <code>Servlet</code>
			</p>

			<h5 id="f1-2" class="title-2th">2、	工作原理</h5>

			<p>
				1）	<code>Servlet</code> 需要开发者编译为 <code>class</code> 文件后放到 <code>WEB-INF/classes</code> 目录，而 <code>JSP</code> 不需要编译，可以直接访问
			</p>
			<p>
				2）	<code>JSP</code> 文件在第一次请求时进行解析、编译，这些都是服务器的工作，对于开发者和浏览器都是透明的
			</p>
			<p>
				3）	<code>JSP</code> 在实际上还是一个 <code>Servlet</code> 的实现类
			</p>
			<p>
				4）	<code>JSP</code> 文件修改之后，服务器会重新进行解析、编译
			</p>

			<h5 id="f1-3" class="title-2th">3、	生命周期</h5>

			<p>
				<code>JSP</code> 也是 <code>servlet</code>，所以也有初始化、销毁等
			</p>
			<p>
				同时还可以在 <code>JSP</code> 中定义初始化、销毁方法
			</p>
			<pre>
&lt;%!
	public void _jspInit() {}
	public void _jspDestory(){}
%&gt;</pre>

			<hr />

			<h4 id="f2" class="title-1th">二、语法</h4>

			<h5 id="f2-1" class="title-2th">1、	基础语法</h5>

			<p>
				可编写 <code>HTML</code> 和 <code>Java</code> 代码
			</p>
			<p>
				其中 <code>HTML</code> 代码可以直接编写
			</p>
			<br />
			<p>
				<span class="high-light">Java 代码</span>
			</p>
			<pre>
&lt;%
	// Java 代码

	/*
		Java 代码
	*/
%&gt;</pre>
			<pre>
&lt;%=variable %&gt;等于out.print("")</pre>

			<br />
			<p>
				<span class="high-light">声明全局变量和方法</span>
			</p>
			<pre>
&lt;%!
	private int i = 0;

	private String m1() { return null; }
	private void m2(){}
%&gt;</pre>

			<br />
			<p>
				<span class="high-light">注释</span>
			</p>
			<pre>
&lt;%-- 注释内容 --%&gt;
&lt;!-- 注释内容 --&gt;</pre>

			<h5 id="f2-2" class="title-2th">2、	指令</h5>

			<p>
				<code>JSP</code> 指令（directive）是为 <code>JSP</code> 引擎而设计的，它们并不直接产生任何可见输出，而只是告诉引擎如何处理 <code>JSP</code> 页面中的其余部分。
			</p>
			<p>
				在 <code>JSP 2.0</code> 规范中共定义了三个指令：<code>page</code> 指令、<code>include</code> 指令、<code>taglib</code> 指令
			</p>
			<br />
			<p>
				<span class="high-light">JSP指令的基本语法格式</span>
			</p>
			<pre>
&lt;%@ 指令 属性名="值" %&gt;</pre>

			<br />
			<p>
				<span class="high-light">举例</span>
			</p>
			<pre>
&lt;%@ page contentType="text/html;charset=gb2312" import="java.util.Date"%&gt;</pre>

			<h5 id="f2-3" class="title-2th">3、	page 指令</h5>

			<p>
				用于定义 <code>jsp</code> 页面的各种属性，可以有多个，最好放在起始位置
			</p>
			<p>
				可以有的属性
			</p>
			<pre>
	language="java"
	extends="类全名"
	import="java.util.*,java.io.*"
	session="true|false" // 不再内置session
	buffer="none|8kb|sizekb" // 指定out对象的缓冲区
	autoFlush="true|false"
	isThreadSafe="true|false"
	errorPage="file_url" // 当页面抛出异常时，转发到配置的页面处理异常

		也可以在web.xml文件配置错误页面

			&lt;error-page&gt;
				&lt;error-code&gt;&lt;/error-code&gt;
				&lt;location&gt;&lt;/location&gt;
			&lt;/error-page&gt;

	isErrorPage="true|false" // 定义这个jsp是不是处理异常的

		可以获取到内置的exception对象

	contentType="text/html; charset=utf-8"
	pageEncoding="utf-8"
	isELIgnored="true|false"</pre>

			<br />
			<p>
				中文乱码解决：文件编码、pageEncoding 属性、contentType 的 charset 的值保持一致
			</p>
			<pre>
contentType="text/html; charset=utf-8"
pageEncoding="utf-8"</pre>

			<h5 id="f2-4" class="title-2th">4、	include 指令</h5>

			<p>
				引入其他 <code>jsp</code> 页面，<code>jsp</code> 引擎会把两个 <code>jsp</code> 解析为一个 <code>servlet</code>
			</p>
			<pre>
&lt;%@include file="/header.jsp" %&gt;</pre>

			<p>
				需要注意生成的 <code>html</code> 文档的格式是否良好
			</p>

			<hr />

			<h4 id="f3" class="title-1th">三、JSP 内置对象</h4>

			<h5 id="f3-1" class="title-2th">1、	什么是内置对象</h5>

			<p>
				在解析的 <code>servlet</code> 中 <code>service</code> 方法自动前置的九个对象，在 <code>jsp</code> 中可以直接使用
			</p>
			<pre>
javax.servlet.http.HttpSession session = null;
javax.servlet.http.HttpServletRequest request = request;
javax.servlet.http.HttpServletResponse response = response;

javax.servlet.ServletContext application = null;
javax.servlet.ServletConfig config = null;

javax.servlet.jsp.JspWriter out = null;

javax.servlet.Servlet page = this;

javax.servlet.jsp.PageContext pageContext = null;</pre>

			<h5 id="f3-2" class="title-2th">2、	具体类型和方法</h5>

			<div class="row">
				<div class="col-md-8 col-md-offset-2 col-sm-12 img-container">
					<table class="table table-bordered table-striped">
						<tr>
							<th style="text-align:left;">对象</th><th style="text-align:left;">类型</th><th style="text-align:left;">主要方法</th>
						</tr>
						<tr>
							<td style="text-align:left;">out</td>
							<td style="text-align:left;">javax.servlet.jsp.JspWriter</td>
							<td style="text-align:left;">
								void append(CharSequence chs)<br />
								void clear()<br />
								void flush()<br />
								void println(String str)
							</td>
						</tr>
						<tr>
							<td style="text-align:left;">request</td>
							<td style="text-align:left;">javax.servlet.http.HttpServletRequest</td>
							<td style="text-align:left;">
								void setAttribute(String k, Object v)<br />
								Object getAttribute(String k)<br />
								String getMethod()<br />
								String getParameter(String k)<br />
								Cookie[] getCookies()<br />
								String getContextPath()<br />
								String getRequestURI()<br />
								String getHeader(String k)<br />
								HttpSession getSession()
							</td>
						</tr>
						<tr>
							<td style="text-align:left;">response</td>
							<td style="text-align:left;">javax.servlet.http.HttpServletResponse</td>
							<td style="text-align:left;">
								void addCookie(Cookie cookie)<br />
								OutputStream getOutputStream()<br />
								void sendRedirect(String url)<br />
								void setContextType(String type)<br />
								PrintWriter getOut()<br />
								void setHeader(String k, String v)<br />
								void setStatus(int status)
							</td>
						</tr>
						<tr>
							<td style="text-align:left;">config</td>
							<td style="text-align:left;">javax.servlet.ServletConfig</td>
							<td style="text-align:left;">
								String getInitParameter(String k)<br />
								ServletContext getServletContext()
							</td>
						</tr>
						<tr>
							<td style="text-align:left;">session</td>
							<td style="text-align:left;">javax.servlet.http.HttpSession</td>
							<td style="text-align:left;">
								void setAttribute(String k, Object v)<br />
								Object getAttribute(String k)<br />
								String getId()<br />
								long getCreationTime()<br />
								long getLastAccessTime()<br />
								int getMaxInactiveInterval()<br />
								void setMaxInactiveInterval(long second)
							</td>
						</tr>
						<tr>
							<td style="text-align:left;">application</td>
							<td style="text-align:left;">javax.servlet.ServletContext</td>
							<td style="text-align:left;">
								void setAttribute(String k, Object v)<br />
								Object getAttribute(String k)<br />
								void removeAttribute(String k)<br />
								String getInitParameter(String k)<br />
								String getMimeType(String filename)<br />
								String getRealPath(String relativePath)
							</td>
						</tr>
						<tr>
							<td style="text-align:left;">page</td>
							<td style="text-align:left;">javax.servlet.Servlet</td>
							<td style="text-align:left;"></td>
						</tr>
						<tr>
							<td style="text-align:left;">pageContext</td>
							<td style="text-align:left;">javax.servlet.jsp.PageContext</td>
							<td style="text-align:left;">
								void forward(String url)<br />
								JspWriter getOut()<br />
								HttpSession getSession()
							</td>
						</tr>
						<tr>
							<td style="text-align:left;">exception</td>
							<td style="text-align:left;">java.lang.Exception</td>
							<td style="text-align:left;">
								1.	&lt;%@ page errorPage="error.jsp" %&gt;<br />
								2.	&lt;%@ page isErrorPage="true" %&gt;
							</td>
						</tr>
					</table>
				</div>
			</div>

			<br />
			<p>
				<a href="web01005.html" style="font-size:12px;">第五节&nbsp;&nbsp;&nbsp;&nbsp;ServletAPI 概述</a>
			</p>
			<br />
			<p>
				加入 QQ 群：5ijy网站开发交流 <a target="_blank" href="http://shang.qq.com/wpa/qunwpa?idkey=3b6ff2e8f01c493cacf78d8eba9ec6362e85b447be8ed8b895d2da6cd5ae537d"><img border="0" src="http://pub.idqqimg.com/wpa/images/group.png" alt="5ijy网站开发交流" title="5ijy网站开发交流"></a>，获取更多源代码和开发环境配置信息。
			</p>
		</div>
		<div class="footer">
			Copyright © 2017-2020 5ijy工作室.<br />
		</div>
		<div id="CfloatBtn" class="CfloatBtn" onclick="$('html,body').animate({'scrollTop': '0'},100);"></div>
	</body>
</html>